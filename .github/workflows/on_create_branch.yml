name: First Run Branch [release, hotfix]
run-name: Publish snapshot

on:
  pull_request:
    types: [opened, synchronize, reopened]
    branches:
      - release/*
      - hotfix/*

jobs:  
  setup:
    name: Setup environment
    secrets: inherit
    uses: dolorestec/devops/.github/workflows/setup-environment.yml@develop

  publish:
    name: Docker publish
    needs: setup
    secrets: inherit
    uses: dolorestec/devops/.github/workflows/docker-publish.yml@develop