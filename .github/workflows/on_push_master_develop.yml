name: Push on [main,develop]
run-name: Push Workflow

on:
  push:
    branches: [ main, develop ]
  workflow_dispatch:

jobs:  
  setup:
    name: Setup environment
    secrets: inherit
    uses: dolorestec/devops/.github/workflows/setup-environment.yml@develop

  publish:
    name: Docker publish
    needs: setup
    secrets: inherit
    uses: dolorestec/devops/.github/workflows/docker-publish.yml@develop
  
  release:
    name: Gitflow Workflow
    needs: publish
    secrets: inherit
    uses: dolorestec/devops/.github/workflows/release-gitflow.yml@develop